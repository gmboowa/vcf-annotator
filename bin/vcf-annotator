#! /usr/bin/env python
'''


'''

if __name__ == '__main__':
    import argparse as ap
    import os
    import sys
    from vcfannotator import annotator
    
    parser = ap.ArgumentParser(
        prog='vcf-annotator.py', 
        conflict_handler='resolve', 
        description="".join(["Annotate SNPs from a VCF file using the ",
                             "reference genome's GenBank file."])
    )
    group1 = parser.add_argument_group('Options', '')
    group1.add_argument('--gb', metavar="STRING", type=str, required=True,
                        help='GenBank file of the reference genome.')
    group1.add_argument('--vcf', metavar="STRING", type=str, required=True,
                        help='VCF file of SNPs')
    group1.add_argument(
        '--length', metavar="INT", type=int, default=15,
        help='Upstream and downstream length to return. (Default 15bp)'
    )
    group1.add_argument('-h', '--help', action='help', 
                        help='Show this help message and exit')
   
    if len(sys.argv)==1:
        parser.print_usage()
        sys.exit(1)
        
    args = parser.parse_args()  
    # Verify input exists
    if not os.path.isfile(args.gb):
        print 'Unable to locate GenBank file: {0}'.format(args.gb)
        parser.print_usage()
        sys.exit(2)
    elif not os.path.isfile(args.vcf):
        print 'Unable to locate VCF file: {0}'.format(args.vcf)
        parser.print_usage()
        sys.exit(1)
    
    annotator = annotator.Annotator(gb_file=args.gb, vcf_file=args.vcf, 
                                    length=args.length)
    annotator.annotate_vcf_records()